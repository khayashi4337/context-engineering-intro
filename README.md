# コンテキストエンジニアリング テンプレート

AIコーディングアシスタントのために、必要な情報（コンテキスト）を設計し、エンドツーエンドで仕事を完遂できるようにする「コンテキストエンジニアリング」のための包括的なテンプレートです。

> **コンテキストエンジニアリングはプロンプトエンジニアリングの10倍、バイブコーディングの100倍の効果があります。**

## 🚀 クイックスタート

```bash
# 1. このテンプレートをクローン
 git clone https://github.com/coleam00/Context-Engineering-Intro.git
 cd Context-Engineering-Intro

# 2. プロジェクトルールを設定（任意・テンプレートあり）
# CLAUDE.mdを編集してプロジェクト固有のガイドラインを追加

# 3. 例を追加（強く推奨）
# examples/ フォルダに関連するコード例を配置

# 4. 最初の機能要件を作成
# INITIAL.mdを編集して要件を記述

# 5. 包括的なPRP（プロダクト要件プロンプト）を生成
# Claude Codeで以下を実行：
/generate-prp INITIAL.md

# 6. PRPを実行して機能を実装
# Claude Codeで以下を実行：
/execute-prp PRPs/your-feature-name.md
```

## 📚 目次

- [コンテキストエンジニアリングとは](#what-is-context-engineering)
- [テンプレート構成](#template-structure)
- [ステップバイステップガイド](#step-by-step-guide)
- [効果的なINITIAL.mdの書き方](#writing-effective-initialmd-files)
- [PRPワークフロー](#the-prp-workflow)
- [例の活用法](#using-examples-effectively)
- [ベストプラクティス](#best-practices)

## コンテキストエンジニアリングとは？

コンテキストエンジニアリングは従来のプロンプトエンジニアリングからのパラダイムシフトです：

### プロンプトエンジニアリング vs コンテキストエンジニアリング

**プロンプトエンジニアリング：**
- 言い回しや表現の工夫に注力
- タスクの指示文だけに限定
- 付箋メモを渡すようなもの

**コンテキストエンジニアリング：**
- 包括的なコンテキストを提供する仕組み全体
- ドキュメント、例、ルール、パターン、バリデーションを含む
- 映画の脚本をすべて書くようなもの

### なぜコンテキストエンジニアリングが重要か

1. **AIの失敗を減らす**：多くのエージェントの失敗はモデルの失敗ではなく、コンテキストの失敗
2. **一貫性の担保**：AIがプロジェクトのパターンや規約を遵守
3. **複雑な機能も実現**：適切なコンテキストでマルチステップ実装も可能
4. **自己修正**：バリデーションループでAI自身がミスを修正

## テンプレート構成

```
context-engineering-intro/
├── .claude/
│   ├── commands/
│   │   ├── generate-prp.md    # PRP生成コマンド
│   │   └── execute-prp.md     # PRP実装コマンド
│   └── settings.local.json    # Claude Code権限
├── PRPs/
│   ├── templates/
│   │   └── prp_base.md       # PRP用ベーステンプレート
│   └── EXAMPLE_multi_agent_prp.md  # 完成例PRP
├── examples/                  # コード例（重要！）
├── CLAUDE.md                 # AIアシスタント用グローバルルール
├── INITIAL.md               # 機能要件テンプレート
├── INITIAL_EXAMPLE.md       # 機能要件例
└── README.md                # 本ファイル
```

このテンプレートはRAGやツールとの連携にはまだ特化していませんが、今後さらに充実予定です。

## ステップバイステップガイド

### 1. グローバルルール（CLAUDE.md）の設定

`CLAUDE.md`にはAIアシスタントがすべての会話で従うプロジェクト全体のルールを記述します。テンプレートには：

- **プロジェクト認識**：プランニングドキュメントやタスクの確認
- **コード構成**：ファイルサイズ制限、モジュール構成
- **テスト要件**：ユニットテストパターン、カバレッジ基準
- **スタイル規約**：言語やフォーマットのルール
- **ドキュメント基準**：ドックストリングやコメントの書式

**テンプレートをそのまま使っても、プロジェクト用にカスタマイズしてもOKです。**

### 2. 最初の機能要件を作成

`INITIAL.md`を編集して実装したい内容を記述します：

```markdown
## FEATURE:
[実装したい機能・要件を具体的に記述]

## EXAMPLES:
[examples/ フォルダの例ファイルとその使い方を説明]

## DOCUMENTATION:
[関連ドキュメント、API、MCPリソースへのリンク]

## OTHER CONSIDERATIONS:
[注意点やAIがよく見落とす点など]
```

**`INITIAL_EXAMPLE.md`に完全な例があります。**

### 3. PRPの生成

PRP（プロダクト要件プロンプト）は、実装のための包括的な設計図です：

- コンテキストとドキュメントを網羅
- バリデーション付きの実装手順
- エラーハンドリングパターン
- テスト要件

PRD（プロダクト要件ドキュメント）に似ていますが、AIコーディングアシスタント向けに特化しています。

Claude Codeで実行：
```bash
/generate-prp INITIAL.md
```

**補足：** スラッシュコマンドは `.claude/commands/` に定義されています。
- `.claude/commands/generate-prp.md` … PRP生成ロジック
- `.claude/commands/execute-prp.md` … PRP実装ロジック

コマンドの `$ARGUMENTS` にはコマンド名の後に渡したファイル名（例：`INITIAL.md`や`PRPs/your-feature.md`）が入ります。

このコマンドは：
1. 機能要件を読み込む
2. コードベースのパターンを調査
3. 関連ドキュメントを検索
4. `PRPs/your-feature-name.md` にPRPを生成

### 4. PRPの実行

生成したPRPを使って機能実装を進めます：

```bash
/execute-prp PRPs/your-feature-name.md
```

AIコーディングアシスタントは：
1. PRPからすべてのコンテキストを読み込む
2. 詳細な実装計画を作成
3. 各ステップをバリデーション付きで実装
4. テストを実行し問題を修正
5. 成功基準をすべて満たすまで繰り返し

## 効果的なINITIAL.mdの書き方

### 重要セクションの解説

**FEATURE**：具体的かつ網羅的に
- ❌「Webスクレイパーを作る」
- ✅「BeautifulSoupを使った非同期Webスクレイパーで、ECサイトの商品データを抽出し、レート制限に対応し、結果をPostgreSQLに保存する」

**EXAMPLES**：examples/ フォルダを活用
- 関連するコードパターンを `examples/` に配置
- 具体的なファイルやパターンを参照
- どの点を模倣すべきか説明

**DOCUMENTATION**：関連リソースを網羅
- APIドキュメントURL
- ライブラリガイド
- MCPサーバードキュメント
- データベーススキーマ

**OTHER CONSIDERATIONS**：重要な注意点も
- 認証要件
- レート制限やクォータ
- よくある落とし穴
- パフォーマンス要件

## PRPワークフロー

### /generate-prp の流れ

コマンドは次のプロセスで動作します：

1. **リサーチフェーズ**
   - コードベースのパターン分析
   - 類似実装の検索
   - 準拠すべき規約の特定

2. **ドキュメント収集**
   - 関連APIドキュメントの取得
   - ライブラリドキュメントの追加
   - 注意点や癖も反映

3. **設計図作成**
   - ステップバイステップの実装計画
   - バリデーションゲートの追加
   - テスト要件の明記

4. **品質チェック**
   - 信頼度スコア（1-10）を付与
   - すべてのコンテキストが網羅されているか確認

### /execute-prp の流れ

1. **コンテキスト読込**：PRP全体を読む
2. **計画**：TodoWriteで詳細なタスクリスト作成
3. **実装**：各要素を実装
4. **バリデーション**：テスト・リント実行
5. **反復**：問題があれば修正
6. **完了**：すべての要件を満たす

`PRPs/EXAMPLE_multi_agent_prp.md` に生成例があります。

## 例の活用法

`examples/` フォルダは成功のカギです。AIコーディングアシスタントは、模倣すべきパターンがあると格段に成果が向上します。

### 例に含めるべきもの

1. **コード構成パターン**
   - モジュールの構成方法
   - インポート規約
   - クラス／関数パターン

2. **テストパターン**
   - テストファイル構成
   - モック化アプローチ
   - アサーションスタイル

3. **統合パターン**
   - APIクライアント実装
   - DB接続
   - 認証フロー

4. **CLIパターン**
   - 引数パース
   - 出力フォーマット
   - エラーハンドリング

### 例ディレクトリ構成

```
examples/
├── README.md           # 各例の説明
├── cli.py             # CLI実装パターン
├── agent/             # エージェント設計パターン
│   ├── agent.py      # エージェント生成パターン
│   ├── tools.py      # ツール実装パターン
│   └── providers.py  # マルチプロバイダーパターン
└── tests/            # テストパターン
    ├── test_agent.py # ユニットテストパターン
    └── conftest.py   # Pytest設定
```

## ベストプラクティス

### 1. INITIAL.mdは明確に
- AIに期待することを明示
- 具体的な要件や制約を記述
- 例を積極的に参照

### 2. 例を充実させる
- 例が多いほど実装精度が向上
- 良い例・悪い例の両方を示す
- エラーハンドリングも含める

### 3. バリデーションゲートを活用
- PRPにテストコマンドを含める
- すべてのバリデーションが通るまでAIが反復
- 初回から動作するコードを保証

### 4. ドキュメントを活用
- 公式APIドキュメントを参照
- MCPサーバーリソースも追加
- ドキュメントの該当セクションを明記

### 5. CLAUDE.mdをカスタマイズ
- 独自の規約やルールを追加
- プロジェクト固有の標準を定義
- コーディング規約を明示

## リソース

- [Claude Code ドキュメント](https://docs.anthropic.com/en/docs/claude-code)
- [Context Engineering Best Practices](https://www.philschmid.de/context-engineering)