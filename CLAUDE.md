### 🔄 プロジェクト認識・コンテキスト
- 新しい会話を始める際は、必ず `PLANNING.md` を読んでプロジェクトの構成・目標・スタイル・制約を把握すること
- 新しいタスクを始める前に `TASK.md` を必ず確認し、もしタスクが載っていなければ簡単な説明と本日の日付を追加すること
- `PLANNING.md` に記載された命名規則・ファイル構成・アーキテクチャパターンを常に守ること
- Pythonコマンドやユニットテストの実行時は常に仮想環境（venv_linux）を利用すること

### 🧱 コード構成とモジュール分割
- 1ファイルが500行を超えないようにすること。近づいた場合はモジュールやヘルパーファイルに分割してリファクタすること
- コードは機能や責務ごとに明確に分割されたモジュールとして整理すること
  エージェントの場合の例：
    - `agent.py` … メインエージェントの定義と実行ロジック
    - `tools.py` … エージェントで使うツール関数
    - `prompts.py` … システムプロンプト
- インポートは明確かつ一貫性を持たせる（パッケージ内では相対インポートを推奨）
- 環境変数の管理にはpython_dotenvとload_env()を使うこと

### 🧪 テストと信頼性
- 新しい機能（関数・クラス・ルートなど）には必ずPytestのユニットテストを作成すること
- ロジックを更新した場合は既存のユニットテストも見直し、必要に応じて修正すること
- テストは `/tests` フォルダ内に配置し、メインアプリの構成を反映させること
  - 少なくとも以下を含める：
    - 通常ケースのテスト
    - 境界値（エッジケース）のテスト
    - 失敗ケースのテスト

### ✅ タスク完了管理
- タスクを完了したら、すぐに `TASK.md` に完了マークを付けること
- 開発中に新たに判明したサブタスクやTODOは「作業中に発見」セクションとして `TASK.md` に追加すること

### 📎 コーディングスタイル・規約
- メイン言語はPythonを使用すること
- PEP8に準拠し、型ヒントを活用し、`black`でフォーマットすること
- データバリデーションには `pydantic` を使うこと
- APIには `FastAPI` を、ORMには `SQLAlchemy` または `SQLModel` を利用（該当する場合）
- すべての関数にGoogleスタイルのドックストリングを記述すること
  ```python
  def example():
      """
      概要説明。

      Args:
          param1 (type): 説明。

      Returns:
          type: 説明。
      """
  ```

### 📚 ドキュメントと説明性
- 新機能の追加や依存関係の変更、セットアップ手順の修正時は必ず `README.md` を更新すること
- 分かりにくいコードにはコメントを付け、中堅レベルの開発者にも理解できるようにすること
- 複雑なロジックを書く場合は、`# Reason:` というインラインコメントで「なぜそうするか」も説明すること

### 🧠 AIアシスタント行動規則
- 不明な点や足りない情報があれば必ず質問し、推測で進めないこと
- 存在しないライブラリや関数をでっち上げないこと。必ず既知・検証済みのPythonパッケージのみを使うこと
- コードやテストでファイルパスやモジュール名を参照する前に、必ず存在を確認すること
- 明示的な指示や `TASK.md` 上のタスクでない限り、既存コードを削除・上書きしないこと